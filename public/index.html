<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AGARIO - </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    
    <!-- Google Sign-In SDK -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <!-- CSS con estilo DamnBruh -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        html, body {
            background: #0a0a0a;
            color: white;
            overflow: hidden;
            height: 100vh;
        }

        /* Fondo con cuadr√≠cula sutil */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(20, 20, 20, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(20, 20, 20, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -1;
        }

        /* === TOP BAR === */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
        }

        .top-bar-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-welcome {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid #FFD700;
        }

        .welcome-text {
            color: #FFD700;
            font-weight: 600;
            font-size: 14px;
        }

        .top-bar-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .control-btn {
            background: none;
            border: none;
            color: #ccc;
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #FFD700;
        }

        .logout-btn {
            background: #FFD700;
            color: #000;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .logout-btn:hover {
            background: #FFED4E;
            transform: scale(1.05);
        }

        /* === LOGO CENTRAL === */
        .logo-section {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 999;
        }

        .game-logo {
            font-size: 48px;
            font-weight: 900;
            color: #FFD700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            letter-spacing: 2px;
            margin-bottom: 5px;
        }

        .game-subtitle {
            font-size: 14px;
            color: #ccc;
            font-weight: 300;
            letter-spacing: 1px;
        }

        /* === PANELES PRINCIPALES === */
        .main-container {
            position: fixed;
            top: 160px;
            left: 50%;
            transform: translateX(-50%);
            display: grid;
            grid-template-columns: 300px 400px 300px;
            gap: 20px;
            z-index: 998;
        }

        .panel {
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .panel-title {
            font-size: 16px;
            font-weight: 600;
            color: #FFD700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* === PANEL IZQUIERDO - LEADERBOARD === */
        .leaderboard-panel {
            height: 400px;
        }

        .live-indicator {
            background: #2ECC71;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            margin-left: auto;
        }

        .leaderboard-error {
            color: #E74C3C;
            font-size: 12px;
            margin: 10px 0;
        }

        .retry-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #ccc;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin: 10px 0;
        }

        .view-leaderboard-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            width: 100%;
            margin-top: 15px;
        }

        /* === PANEL CENTRAL - GAME CONTROLS === */
        .game-panel {
            height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .user-score {
            background: #FFD700;
            color: #000;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 18px;
        }

        .username-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            padding: 10px;
            color: white;
            font-size: 14px;
            outline: none;
        }

        .username-input:focus {
            border-color: #FFD700;
        }

        .bet-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .bet-btn {
            background: #FFD700;
            color: #000;
            border: none;
            padding: 12px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .bet-btn:hover {
            background: #FFED4E;
            transform: scale(1.05);
        }

        .join-game-btn {
            background: #FFD700;
            color: #000;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .join-game-btn:hover {
            background: #FFED4E;
            transform: scale(1.02);
        }

        .secondary-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .secondary-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .secondary-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .game-stats {
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            font-size: 12px;
        }

        .stat-value {
            color: #FFD700;
            font-weight: 600;
        }

        .bottom-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .bottom-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s;
        }

        .bottom-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* === PANEL DERECHO SUPERIOR - WALLET === */
        .wallet-panel {
            height: 200px;
        }

        .wallet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .wallet-controls {
            display: flex;
            gap: 8px;
        }

        .wallet-control-btn {
            background: none;
            border: none;
            color: #ccc;
            font-size: 14px;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .wallet-control-btn:hover {
            color: #FFD700;
        }

        .balance-display {
            text-align: center;
            margin: 20px 0;
        }

        .balance-amount {
            font-size: 24px;
            font-weight: 900;
            color: #FFD700;
            margin-bottom: 5px;
        }

        .balance-crypto {
            font-size: 12px;
            color: #ccc;
        }

        .wallet-buttons {
            display: flex;
            gap: 10px;
        }

        .add-funds-btn {
            flex: 1;
            background: #2ECC71;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .add-funds-btn:hover {
            background: #27AE60;
        }

        .cash-out-btn {
            flex: 1;
            background: #9B59B6;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .cash-out-btn:hover {
            background: #8E44AD;
        }

        /* === PANEL DERECHO INFERIOR - CUSTOMIZE === */
        .customize-panel {
            height: 180px;
            margin-top: 20px;
        }

        .character-preview {
            width: 80px;
            height: 80px;
            background: #3498DB;
            border-radius: 50%;
            margin: 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .change-appearance-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            width: 100%;
            transition: all 0.2s;
        }

        .change-appearance-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* === PANEL IZQUIERDO INFERIOR - FRIENDS === */
        .friends-panel {
            height: 180px;
            margin-top: 20px;
        }

        .friends-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .friends-count {
            font-size: 10px;
            color: #ccc;
        }

        .no-friends {
            text-align: center;
            color: #ccc;
            font-size: 12px;
            margin: 20px 0;
        }

        .add-friends-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            width: 100%;
            transition: all 0.2s;
        }

        .add-friends-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* === DISCORD BUTTON === */
        .discord-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #9B59B6;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            z-index: 997;
        }

        .discord-btn:hover {
            background: #8E44AD;
            transform: scale(1.05);
        }

        /* === SECCI√ìN DE LOGIN === */
        #loginSection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .login-container {
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 16px 64px rgba(0, 0, 0, 0.5);
            max-width: 400px;
            width: 90%;
        }

        .login-logo {
            font-size: 36px;
            font-weight: 900;
            color: #FFD700;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .login-subtitle {
            color: #ccc;
            font-size: 14px;
            margin-bottom: 30px;
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .dev-login-btn {
            background: #FFD700;
            color: #000;
        }

        .dev-login-btn:hover {
            background: #FFED4E;
            transform: scale(1.02);
        }

        .google-login-btn {
            background: #4285F4;
            color: white;
        }

        .google-login-btn:hover {
            background: #357AE8;
            transform: scale(1.02);
        }

        .login-features {
            margin-top: 30px;
            text-align: left;
            font-size: 12px;
            color: #999;
        }

        .login-features p {
            margin: 8px 0;
            padding-left: 15px;
            position: relative;
        }

        .login-features p::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            color: #FFD700;
        }

        /* === SECCI√ìN DEL JUEGO === */
        #gameSection {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1001;
        }

        /* === √ÅREA DE JUEGO === */
        #gameAreaWrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.3s;
        }

        canvas {
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
        }

        /* === ELEMENTOS DEL JUEGO === */
        #cashOutBtn {
            position: absolute;
            top: 80px;
            left: 20px;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
            z-index: 98;
            transition: all 0.3s ease;
            display: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            border: 2px solid rgba(255,255,255,0.2);
        }

        #cashOutBtn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 16px rgba(0,0,0,0.5);
            background: linear-gradient(45deg, #e67e22, #d35400);
        }

        #cashOutBtn:active {
            transform: scale(0.95);
        }

        #currentValueDisplay {
            position: absolute;
            top: 140px;
            left: 20px;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            display: none;
            z-index: 99;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profit { color: #2ecc71; }
        .loss { color: #e74c3c; }

        #status {
            position: absolute;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            color: #FFF;
            font-size: 16px;
            top: 20px;
            right: 20px;
            font-weight: bold;
            text-align: center;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chatbox {
            position: absolute;
            width: 300px;
            height: 320px;
            background: rgba(22, 22, 22, 0.9);
            bottom: 20px;
            left: 20px;
            border-radius: 8px;
            pointer-events: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-list {
            padding: 10px;
            margin: 0;
            list-style: none;
            height: 285px;
            overflow: hidden;
        }

        .chat-input {
            pointer-events: all;
            width: 100%;
            padding: 10px;
            background: transparent;
            border: none;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            outline: none;
            color: white;
        }

        /* === MODALES === */
        #cashOutModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            display: none;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 20, 20, 0.95);
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            min-width: 300px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }

        .modal-content h3 {
            margin-top: 0;
            color: #FFD700;
        }

        .modal-content button {
            margin: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }

        #confirmCashOut {
            background: #2ecc71;
            color: white;
        }

        #cancelCashOut {
            background: #95a5a6;
            color: white;
        }

        #errorMessage {
            background: #e74c3c;
            color: white;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            display: none;
        }

        #cashOutResult {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #2ecc71;
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 1001;
            display: none;
            text-align: center;
        }

        /* === RESPONSIVE === */
        @media only screen and (max-width: 1200px) {
            .main-container {
                grid-template-columns: 250px 350px 250px;
                gap: 15px;
            }
        }

        @media only screen and (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 15px;
                top: 120px;
                left: 20px;
                right: 20px;
                transform: none;
            }

            .panel {
                height: auto;
                min-height: 200px;
            }

            .top-bar {
                padding: 0 15px;
            }

            .game-logo {
                font-size: 32px;
            }
        }
    </style>
</head>
<body>
    <!-- === SECCI√ìN DE LOGIN === -->
    <div id="loginSection">
        <div class="login-container">
            <div class="login-logo">AGARIO</div>
            <div class="login-subtitle"></div>
            
            <button id="devLoginBtn" class="login-btn dev-login-btn">
                üöÄ Login (Dev Mode)
            </button>
            
            <button id="googleLoginBtn" class="login-btn google-login-btn">
                <svg width="18" height="18" viewBox="0 0 24 24">
                    <path fill="white" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="white" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="white" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="white" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Sign in with Google
            </button>
            
            <div class="login-features">
                <p>Apuesta entre $1 - $5 USDC</p>
                <p>Cash out en cualquier momento (90%)</p>
                <p>Come otros jugadores para ganar valor</p>
            </div>
        </div>
    </div>

    <!-- === SECCI√ìN PRINCIPAL DEL JUEGO === -->
    <div id="gameSection">
        
        <!-- === TOP BAR === -->
        <div class="top-bar">
            <div class="top-bar-left">
                <div class="user-welcome">
                    <img id="userAvatar" src="" class="user-avatar" style="display: none;" alt="User Avatar">
                    <span class="welcome-text">Welcome, <span id="userName">Usuario</span>!</span>
                </div>
            </div>
            
            <div class="top-bar-right">
                <button class="control-btn" title="Volume">üîä</button>
                <button class="control-btn" title="Settings">‚öôÔ∏è</button>
                <button id="logoutBtn" class="logout-btn">Logout</button>
            </div>
        </div>

        <!-- === LOGO CENTRAL === -->
        <div class="logo-section">
            <div class="game-logo">AGARIO</div>
            <div class="game-subtitle"></div>
        </div>

        <!-- === PANELES PRINCIPALES === -->
        <div class="main-container">
            
            <!-- === PANEL IZQUIERDO === -->
            <div class="panel leaderboard-panel">
                <div class="panel-title">
                    üèÜ Leaderboard
                    <span class="live-indicator">Live</span>
                </div>
                <div class="leaderboard-error">Failed to fetch</div>
                <button class="retry-btn">üîÑ Retry</button>
                <button class="view-leaderboard-btn">View Full Leaderboard</button>
            </div>

            <!-- === PANEL CENTRAL === -->
            <div class="panel game-panel">
                <div class="user-info">
                    <div class="user-score">0</div>
                    <input type="text" id="playerNameInput" class="username-input" placeholder="Tu nombre en el juego" maxlength="25" autofocus />
                    <button class="control-btn" title="Edit">‚úèÔ∏è</button>
                </div>

                <div class="bet-buttons">
                    <button class="bet-btn" data-bet="1">$1</button>
                    <button class="bet-btn" data-bet="5">$5</button>
                    <button class="bet-btn" data-bet="20">$20</button>
                </div>

                <button id="startButton" class="join-game-btn">
                    ‚ñ∑ JOIN GAME
                </button>

                <div class="secondary-buttons">
                    <button class="secondary-btn">‚ìä US</button>
                    <button class="secondary-btn">‚ò∞ Browse Lobbies</button>
                </div>

                <div class="game-stats">
                    <div class="stat-item">
                        <span>39 Players In Game</span>
                    </div>
                    <div class="stat-item">
                        <span>$83,801 Global Player Winnings</span>
                        <span class="stat-value">$83,801</span>
                    </div>
                </div>

                <div class="bottom-buttons">
                    <button class="bottom-btn">üì¶ Daily Crate</button>
                    <button class="bottom-btn">üë• Affiliate</button>
                </div>
            </div>

            <!-- === PANEL DERECHO === -->
            <div>
                <!-- === WALLET PANEL === -->
                <div class="panel wallet-panel">
                    <div class="panel-title">‚ñß Wallet</div>
                    <div class="wallet-header">
                        <div class="wallet-controls">
                            <button class="wallet-control-btn" title="Copy Address">üìã</button>
                            <button class="wallet-control-btn" title="Refresh Balance">üîÑ</button>
                        </div>
                    </div>
                    
                    <div class="balance-display">
                        <div class="balance-amount">$<span id="availableBalance">0.00</span></div>
                        <div class="balance-crypto">0.0000 SOL</div>
                    </div>

                <div class="wallet-buttons">
                        <button id="addBalanceBtn" class="add-funds-btn">Add Funds</button>
                        <button class="cash-out-btn">Cash Out</button>
                    </div>
                </div>

                <!-- === CUSTOMIZE PANEL === -->
                <div class="panel customize-panel">
                    <div class="panel-title">üëï Customize</div>
                    <div class="character-preview">üêõ</div>
                    <button class="change-appearance-btn">Change Appearance</button>
                </div>
            </div>

            <!-- === PANEL IZQUIERDO INFERIOR === -->
            <div>
                <div class="panel friends-panel">
                    <div class="panel-title">üë• Friends</div>
                    <div class="friends-header">
                        <button class="wallet-control-btn" title="Refresh">üîÑ</button>
                        <span class="friends-count">0 playing</span>
                    </div>
                    <div class="no-friends">
                        <div style="font-size: 48px; margin: 20px 0;">üë§</div>
                        <div>No friends... add some!</div>
                    </div>
                    <button class="add-friends-btn">Add Friends</button>
                </div>
            </div>
        </div>

        <!-- === DISCORD BUTTON === -->
        <button class="discord-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
            </svg>
            Join Discord!
        </button>

        <!-- === √ÅREA DE JUEGO === -->
        <div id="gameAreaWrapper">
            <!-- Bot√≥n de cash out -->
            <button id="cashOutBtn">üí∞ Cash Out</button>
            
            <!-- Display de valor actual -->
            <div id="currentValueDisplay">
                <div>Valor: $<span id="valueAmount">0.00</span></div>
                <div>ROI: <span id="roiAmount">0%</span></div>
            </div>

            <!-- Indicador de controles -->
            <div id="controlsIndicator" style="display: none;">
                <div style="background: rgba(0,0,0,0.8); color: white; padding: 10px; border-radius: 8px; font-size: 12px; position: absolute; bottom: 20px; left: 20px; z-index: 97;">
                    <div><strong>üéÆ Controls:</strong></div>
                    <div>C = Cash Out</div>
                    <div>ESC = Exit Game</div>
                </div>
            </div>

            <!-- Leaderboard -->
            <div id="status">
                <span class="title">Leaderboard</span>
            </div>
            
            <!-- Chat -->
            <div class="chatbox" id="chatbox">
                <ul id="chatList" class="chat-list"></ul>
                <input id="chatInput" type="text" class="chat-input" placeholder="Chat aqu√≠..." maxlength="35" />
            </div>
            
            <!-- Controles m√≥viles -->
            <div id="mobile">
                <button id="split" style="position: absolute; bottom: 10px; left: 10px; width: 100px; height: 100px;">Split</button>
                <button id="feed" style="position: absolute; bottom: 10px; right: 10px; width: 100px; height: 100px;">Feed</button>
            </div>
            
            <!-- Canvas principal -->
            <canvas tabindex="1" id="cvs"></canvas>
        </div>
    </div>

    <!-- === MODAL DE CASH OUT === -->
    <div id="cashOutModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
        <div class="modal-content" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #2c3e50; color: white; padding: 30px; border-radius: 15px; text-align: center; min-width: 400px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
            <h3 style="color: #f39c12; margin-bottom: 20px; font-size: 24px;">üí∞ Cash Out</h3>
            <div style="font-size: 20px; margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                Valor actual: <strong style="color: #f39c12;">$<span id="currentValue">0.00</span></strong>
            </div>
            <hr style="border: 1px solid rgba(255,255,255,0.2); margin: 20px 0;">
            <div style="margin: 15px 0;">
                <p>Recibir√°s: <strong style="color: #2ecc71; font-size: 18px;">$<span id="cashOutAmount">0.00</span></strong> (90%)</p>
                <p>Fee del sistema: <span style="color: #e74c3c;">$<span id="feeAmount">0.00</span></span> (10%)</p>
            </div>
            <hr style="border: 1px solid rgba(255,255,255,0.2); margin: 20px 0;">
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button id="confirmCashOut" style="background: #2ecc71; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px;">‚úÖ Confirmar Cash Out</button>
                <button id="cancelCashOut" style="background: #e74c3c; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px;">‚ùå Continuar Jugando</button>
            </div>
        </div>
    </div>

    <!-- === RESULTADO DE CASH OUT === -->
    <div id="cashOutResult"></div>

    <!-- === MODAL RECARGA (NOWPayments) === -->
    <div id="topUpModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.85); z-index:2000;">
      <div style="position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); background:#1b2430; color:#fff; padding:24px; border-radius:12px; width: 420px; max-width: 95vw;">
        <h3 style="margin:0 0 12px; color:#FFD700;">‚ûï Add Funds (NOWPayments)</h3>
        <div style="font-size:13px; color:#aaa; margin-bottom:12px;">Pay with crypto, credited in USD to your balance.</div>
        <div style="display:flex; gap:8px; margin-bottom:12px;">
          <input id="topUpAmount" type="number" min="5" step="1" value="25" placeholder="$ Amount (USD)" style="flex:1; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.15); background:#243143; color:#fff;">
          <select id="topUpCurrency" style="width:140px; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.15); background:#243143; color:#fff;">
            <option value="usdt">USDT</option>
            <option value="usdc">USDC</option>
            <option value="btc">BTC</option>
            <option value="eth">ETH</option>
            <option value="sol">SOL</option>
          </select>
        </div>
        <div id="topUpError" style="display:none; background:#e74c3c; padding:8px 10px; border-radius:6px; font-size:12px; margin-bottom:10px;"></div>
        <div id="topUpStepCreate" style="display:block;">
          <button id="topUpCreateBtn" style="width:100%; padding:12px; border:none; background:#2ECC71; color:#fff; border-radius:10px; font-weight:700; cursor:pointer;">Create Payment</button>
        </div>
        <div id="topUpStepPay" style="display:none;">
          <div style="margin:10px 0; font-size:13px; color:#ddd;">Send exactly <b><span id="topUpPayAmount">0</span></b> to address:</div>
          <div style="word-break:break-all; background:#0f1722; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.1); font-family:monospace;">
            <span id="topUpPayAddress"></span>
          </div>
          <div style="display:flex; justify-content:center; margin:12px 0;">
            <img id="topUpQr" src="" width="160" height="160" style="border-radius:8px; border:1px solid rgba(255,255,255,0.1);"/>
          </div>
          <div style="font-size:12px; color:#aaa;">Payment expires: <span id="topUpExpires"></span></div>
          <button id="topUpCheckBtn" style="margin-top:12px; width:100%; padding:10px; border:none; background:#3498db; color:#fff; border-radius:10px; font-weight:700; cursor:pointer;">I‚Äôve paid, Check Status</button>
        </div>
        <button id="topUpClose" style="margin-top:10px; width:100%; padding:8px; background:#95a5a6; border:none; color:#fff; border-radius:8px; cursor:pointer;">Close</button>
      </div>
    </div>

    <!-- === SCRIPTS === -->
    
    <!-- Socket.io client -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.js"></script>
    
    <!-- ORDEN CORRECTO DE CARGA: -->
    
    <!-- 1. Funciones de render PRIMERO -->
    <script src="game/js/render.js"></script>
    
    <!-- 2. Clases de autenticaci√≥n -->
    <script src="game/js/auth-manager.js"></script>
    <script src="game/js/betting-client.js"></script>
    
    <!-- 3. Canvas y Chat (SIN auto-inicializaci√≥n) -->
    <script src="game/js/canvas.js"></script>
    <script src="game/js/chat-client.js"></script>
    
    <!-- 4. App principal AL FINAL -->
    <script src="game/js/app-betting.js"></script>

    <!-- 5. Google Sign-In Integration -->
    <script>
        // Configuraci√≥n global de Google Sign-In
        window.onGoogleLibraryLoad = function() {
            console.log('üîê Google Sign-In SDK loaded');
            
            // Obtener Client ID del servidor
            fetch('/api/config/google')
                .then(response => response.json())
                .then(config => {
                    if (config.clientId) {
                        initializeGoogleSignIn(config.clientId);
                    } else {
                        console.warn('‚ö†Ô∏è Google Client ID not configured');
                    }
                })
                .catch(error => {
                    console.error('‚ùå Failed to load Google config:', error);
                });
        };

        function initializeGoogleSignIn(clientId) {
            console.log('üîß Initializing Google Sign-In with client ID:', clientId.substring(0, 20) + '...');
            
            google.accounts.id.initialize({
                client_id: clientId,
                callback: handleGoogleSignIn,
                auto_select: false,
                cancel_on_tap_outside: true
            });

            // Configurar el bot√≥n personalizado
            const googleBtn = document.getElementById('googleLoginBtn');
            if (googleBtn) {
                googleBtn.onclick = function() {
                    console.log('üîó Google Sign-In button clicked');
                    google.accounts.id.prompt((notification) => {
                        if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
                            console.log('üîÑ Google prompt not shown, rendering button...');
                            
                            // Si el prompt no se muestra, usar el bot√≥n
                            google.accounts.id.renderButton(
                                document.getElementById('googleLoginBtn'),
                                {
                                    theme: 'filled_blue',
                                    size: 'large',
                                    type: 'standard',
                                    shape: 'rectangular',
                                    width: '100%'
                                }
                            );
                        }
                    });
                };
            }
        }

        async function handleGoogleSignIn(response) {
            console.log('üîê Google Sign-In response received');
            
            if (!response.credential) {
                console.error('‚ùå No credential in Google response');
                return;
            }

            try {
                // Usar authManager para procesar el login
                if (typeof authManager !== 'undefined') {
                    const success = await authManager.loginWithGoogleToken(response.credential);
                    if (success) {
                        console.log('‚úÖ Google login successful');
                    } else {
                        console.error('‚ùå Google login failed');
                    }
                } else {
                    console.error('‚ùå AuthManager not loaded');
                }
            } catch (error) {
                console.error('üö® Error processing Google login:', error);
            }
        }

        // === MANEJO DE ERRORES ===
        window.addEventListener('error', function(e) {
            console.error('üö® Global error:', e.error);
            
            const errorDiv = document.getElementById('errorMessage');
            if (errorDiv) {
                errorDiv.textContent = 'Error: ' + (e.message || 'Unknown error');
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
            }
        });
        
        // === DEBUGGING HELPERS ===
        if (window.location.hostname === 'localhost') {
            window.debugBetting = {
                checkGlobal: () => console.log('Global:', typeof global !== 'undefined' ? global : 'undefined'),
                checkAuth: () => console.log('AuthManager:', typeof AuthManager !== 'undefined' ? 'loaded' : 'missing'),
                forceLogin: () => {
                    if (typeof authManager !== 'undefined') {
                        authManager.devLogin();
                    } else {
                        console.log('‚ùå AuthManager not available');
                    }
                },
                showElements: () => {
                    console.log('Elements:', {
                        devLoginBtn: !!document.getElementById('devLoginBtn'),
                        gameSection: !!document.getElementById('gameSection'),
                        canvas: !!document.getElementById('cvs')
                    });
                },
                testGoogleLogin: () => {
                    if (typeof google !== 'undefined') {
                        google.accounts.id.prompt();
                    } else {
                        console.log('‚ùå Google SDK not loaded');
                    }
                }
            };
            
            console.log('üîß Development mode - Use window.debugBetting for helpers');
        }
    </script>

    <!-- Cargar Google SDK despu√©s de que la p√°gina est√© lista -->
    <script>
        // Asegurar que Google SDK se carga correctamente
        if (typeof google === 'undefined') {
            console.log('‚è≥ Waiting for Google SDK to load...');
        } else {
            console.log('‚úÖ Google SDK already loaded');
            window.onGoogleLibraryLoad();
        }
    </script>
</body>
</html>